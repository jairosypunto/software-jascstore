/* =========================================================
   üõçÔ∏è JASCSTORE ELITE SYSTEM ‚Äì VISTA R√ÅPIDA & CARRITO
   ========================================================= */

:root {
    --azul-hermoso: #0f087e; /* Tu azul exacto de marca */
    --azul-premium: #1a237e;
    --blanco: #ffffff;
    --negro-lujo: #1d1d1f;
    --overlay-bg: rgba(15, 8, 126, 0.18);
    --sombra-pro: 0 20px 50px rgba(0, 0, 0, 0.2);
    --curva-premium: cubic-bezier(0.165, 0.84, 0.44, 1);
}

/* 1. OVERLAY CINEMATOGR√ÅFICO (FONDO) */
.vista-rapida-overlay, .carrito-overlay {
    position: fixed !important;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: var(--overlay-bg) !important;
    z-index: 9990 !important;
    display: none;
    backdrop-filter: blur(12px) !important; /* Efecto cristal para enfoque total */
    -webkit-backdrop-filter: blur(12px);
    transition: all 0.5s ease;
}

.overlay-active {
    display: block !important;
    animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* 2. CARRITO LATERAL (DISE√ëO BOUTIQUE - CORREGIDO) */
#carritoModal {
    position: fixed !important;
    top: 80px !important; /* üöÄ AJUSTE: Empieza debajo de la Navbar */
    right: 0;
    width: 450px;
    height: calc(100vh - 80px) !important; /* üöÄ AJUSTE: Altura din√°mica para no salirse */
    background: var(--blanco) !important;
    transform: translateX(100%);
    transition: transform 0.5s var(--curva-premium);
    z-index: 15000 !important; /* Por debajo de la Navbar (20000) pero encima de todo lo dem√°s */
    box-shadow: -15px 0 45px rgba(0,0,0,0.15);
    display: flex !important;
    flex-direction: column !important;
    border-left: 6px solid var(--azul-hermoso);
}

/* 7. BOTONES DE CIERRE (M√ÅXIMA VISIBILIDAD) */
.cerrar-panel, .cerrar-carrito {
    position: absolute !important;
    top: 15px !important; /* üöÄ AJUSTE: Bajado un poco para no chocar con el borde */
    right: 20px !important;
    background: var(--azul-hermoso) !important;
    color: white !important;
    border-radius: 50% !important;
    width: 45px !important; /* üöÄ AJUSTE: Tama√±o m√°s estilizado */
    height: 45px !important;
    border: 3px solid white !important;
    z-index: 20005 !important; /* üöÄ CRUCIAL: Por encima de la Navbar (20000) para poder cerrar siempre */
    cursor: pointer;
    display: flex !important;
    align-items: center; justify-content: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2) !important;
    transition: all 0.4s ease !important;
}

/* Estado Activo del Carrito */
#carritoModal.active, #carritoModal:not(.hidden) { 
    transform: translateX(0) !important; 
}

/* 3. VISTA R√ÅPIDA (MODAL TIPO APPLE) */
#vistaRapidaPanel {
    position: fixed !important;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0.92);
    width: 95%;
    max-width: 1000px;
    background: var(--blanco);
    border-radius: 35px; /* Bordes org√°nicos */
    z-index: 10005 !important;
    opacity: 0;
    transition: all 0.5s var(--curva-premium);
    visibility: hidden; 
    overflow: hidden;
    box-shadow: var(--sombra-pro);
}

#vistaRapidaPanel.visible {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

/* 4. CONTENIDO INTERACTIVO Y SCROLL */
.vista-rapida-contenido {
    display: grid !important; 
    grid-template-columns: 1.1fr 0.9fr; 
    gap: 0; 
    height: 100%;
    max-height: 85vh;
}

/* Contenedor de Scroll para Carrito y Vista R√°pida */
#contenidoCarrito, .vista-rapida-info {
    flex-grow: 1 !important;
    overflow-y: auto !important;
    padding: 40px !important;
    scrollbar-width: thin;
    scrollbar-color: var(--azul-hermoso) transparent;
    -webkit-overflow-scrolling: touch;
}

/* 5. SELECTORES DE COLOR / MINIATURAS */
.color-photo-chip {
    width: 70px; height: 85px;
    border: 2px solid #f0f0f0;
    border-radius: 14px;
    cursor: pointer;
    transition: var(--transition-premium);
    object-fit: cover;
    margin-right: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.color-photo-chip:hover {
    transform: translateY(-5px) scale(1.05);
    border-color: var(--azul-hermoso);
}

.color-photo-chip.active {
    border-color: var(--azul-hermoso);
    box-shadow: 0 0 15px rgba(15, 8, 126, 0.2);
    transform: scale(1.1);
}

/* 6. BOTONES DE ACCI√ìN (SENSACI√ìN DE SEGURIDAD) */
.btn-agregar-vr, .btn-continuar-compra {
    background: var(--azul-hermoso) !important;
    color: white !important;
    padding: 18px !important;
    border-radius: 20px !important;
    font-weight: 700 !important;
    text-transform: uppercase;
    letter-spacing: 1px;
    border: none !important;
    transition: var(--transition-premium) !important;
    box-shadow: 0 10px 25px rgba(15, 8, 126, 0.25) !important;
}

.btn-agregar-vr:hover {
    background: #000 !important; /* Toque ultra-moderno */
    transform: translateY(-3px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.3) !important;
}

/* 7. BOTONES DE CIERRE (M√ÅXIMA VISIBILIDAD) */
.cerrar-panel, .cerrar-carrito {
    position: absolute !important;
    top: 25px !important;
    right: 25px !important;
    background: var(--azul-hermoso) !important;
    color: white !important;
    border-radius: 50% !important;
    width: 50px !important;
    height: 50px !important;
    border: 3px solid white !important;
    z-index: 10010 !important;
    cursor: pointer;
    display: flex !important;
    align-items: center; justify-content: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2) !important;
    transition: all 0.4s ease !important;
}

.cerrar-panel:hover, .cerrar-carrito:hover {
    transform: rotate(90deg) scale(1.1);
}

.cerrar-panel::before, .cerrar-carrito::before {
    content: "‚úï" !important;
    font-size: 20px !important;
    font-weight: bold !important;
}

/* 8. ADAPTACI√ìN MAESTRA PARA M√ìVIL (330px - 768px) */
@media (max-width: 768px) {
    #carritoModal { 
        width: 100% !important; 
        border-left: none;
    }

    #vistaRapidaPanel {
        width: 100% !important;
        height: 100% !important;
        max-height: 100vh !important;
        border-radius: 0 !important;
        top: 0; left: 0;
        transform: none !important;
    }

    .vista-rapida-contenido {
        display: flex !important;
        flex-direction: column !important;
        overflow-y: auto !important;
    }

    .big-image {
        width: 100% !important;
        max-height: 380px !important;
        padding: 20px;
    }

    .cerrar-carrito, .cerrar-panel {
        top: 20px !important;
        right: 20px !important;
        width: 45px !important;
        height: 45px !important;
    }

    .vista-rapida-info {
        padding: 25px !important;
    }
}

/* ‚úÖ AZUL HERMOSO: Selecci√≥n Total */
.option-chip.seleccionado, 
.option-chip.btn-dark {
    background-color: var(--azul-hermoso) !important;
    color: white !important;
    border-color: var(--azul-hermoso) !important;
    box-shadow: 0 4px 10px rgba(26, 35, 126, 0.3) !important;
}

/* ‚úÖ BLOQUEO TOTAL: Botones sin stock */
.option-chip:disabled, 
.option-chip.btn-disabled, 
.option-chip.agotado {
    background-color: #f2f2f2 !important;
    color: #ccc !important;
    border: 1px dashed #ddd !important;
    cursor: not-allowed !important;
    opacity: 0.4 !important;
    pointer-events: none !important;
    position: relative;
}

/* Marca de "X" para los botones agotados */
.option-chip.agotado::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 1px;
    background: #ccc;
    transform: rotate(-15deg);
}

/* ‚úÖ ESTADO DESHABILITADO (Gris Boutique) */
.btn-agregar-vr:disabled, 
.jasc-cart:disabled {
    background: #d1d5db !important; /* Gris elegante */
    color: #9ca3af !important;
    cursor: not-allowed !important;
    box-shadow: none !important;
    transform: none !important;
    opacity: 0.7;
}

/* ‚úÖ ESTADO ACTIVO (Tu Azul Hermoso) */
/* Este se activa cuando JS le quita el 'disabled' */
.btn-agregar-vr:not(:disabled),
.jasc-cart:not(:disabled) {
    background: var(--azul-hermoso) !important;
    cursor: pointer !important;
}

/* Ajuste espec√≠fico para el bot√≥n de "Selecciona Talla y Color" en Home */
#btnConfirmarAgregar.esperando-seleccion {
    background: #e5e7eb !important;
    color: #6b7280 !important;
}

/* üö´ ESTILO PARA BOT√ìN DESHABILITADO */
#add-to-cart-btn:disabled,
.btn-disabled {
    background: #b0b0b0 !important; /* Gris que indica que falta seleccionar algo */
    border-color: #d0d0d0 !important;
    color: #ffffff !important;
    cursor: not-allowed !important;
    opacity: 0.7 !important;
    transform: none !important; 
    box-shadow: none !important;
}

/* SECCI√ìN FINAL ADICIONAL PARA REFORZAR BANNER */
.hero-banner-exclusivo {
    z-index: 1 !important; /* Asegura que el banner no tape los modales */
    position: relative;
}

/* =========================================================
   üõ°Ô∏è PROTECCI√ìN DE CAPAS (SOLUCI√ìN DE SUPERPOSICI√ìN)
   ========================================================= */

/* 1. EL BANNER: Debe estar por debajo de la Navbar pero encima de los productos */
.hero-banner-exclusivo, 
.main-banner, 
#header-banner {
    position: relative !important;
    z-index: 10 !important; /* Capa base */
}

/* 2. LOS PRODUCTOS: Deben pasar POR DEBAJO del banner y la navbar al hacer scroll */
.grid-productos, 
.product-card, 
.item-articulo,
.contenido-principal {
    position: relative !important;
    z-index: 1 !important; /* Capa m√°s baja */
}

/* 3. LA NAVBAR: Siempre debe ser la reina (Azul Hermoso) */
.navbar, 
header, 
#main-nav {
    position: sticky !important;
    top: 0;
    z-index: 20000 !important; /* Por encima de todo los productos */
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

/* 4. REFUERZO PARA M√ìVIL */
@media (max-width: 768px) {
    .grid-productos {
        z-index: 1 !important;
    }
}

/* =========================================================
   ‚ú® REFUERZO DE ELEGANCIA: CAPAS DE DESLIZAMIENTO
   ========================================================= */

/* 1. EL CONTENIDO: Se desliza por debajo de la jerarqu√≠a superior */
main, 
.contenedor-tienda, 
.grid-productos, 
#productos-lista {
    position: relative !important;
    z-index: 1 !important; /* Capa base para que nada flote encima del banner */
}

/* 2. EL BANNER: Act√∫a como un puente visual */
.hero-banner-exclusivo, 
[class*="banner"] {
    position: relative !important;
    z-index: 500 !important; /* Superior a los art√≠culos pero inferior a la Navbar */
}

/* 3. LA NAVBAR (AZUL HERMOSO): La corona del sitio */
nav, 
.navbar, 
header {
    position: sticky !important;
    top: 0 !important;
    z-index: 20000 !important; /* Prioridad absoluta */
    box-shadow: 0 10px 30px rgba(0,0,0,0.15) !important;
}

/* 4. AJUSTE PARA EL TOAST "¬°A√ëADIDO!": Para que no tape el subtotal */
#toast-carrito, 
.toast-success {
    z-index: 20010 !important; 
    bottom: 30px !important; 
}